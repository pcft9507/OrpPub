<div class="layer-popup type-modal" data-ref="WAP-EMPL-0371">
  <section class="popup__container popup__size-l">
    <div class="popup__header">
      <h3 class="popup__title">불러오기</h3>
    </div>
    <div class="popup__contents popup__scroll-view" style="height: 500px;">

      <div class="box-flex">
        <div class="box-flex__cell" style="flex: 1;">
          <div class="input-box type-search" style="width: 100%;">
            <input type="text" class="input-txt" placeholder="채용공고를 입력하세요" oninput="inputValueChk()">
            <button type="button" class="btn-del" onclick="inputValueDel()">키워드 삭제</button>
          </div>
        </div>
        <div class="box-flex__cell box-flex">
          <button class="base-btn type1__size-m">검색</button>
        </div>
      </div>

      <div class="base-tab tab-type1 content-mt4" data-ref="tabPopContents2">
        <ul class="tab__list" role="tablist">
          <li class="tab__item">
            <button role="tab" aria-selected="true">이전채용(23)</button>
          </li>
          <li class="tab__item">
            <button role="tab" aria-selected="false">보관함(5)</button>
          </li>
        </ul>
      </div>
      <script>
        const tabPopContents2 = new TabContents({target: 'tabPopContents2'});

        $(document).ready(function (){
          // 탭 클릭 시 이벤트 처리
          $("[data-ref=tabPopContents2] [role=tab]").on("click", function() {
            // 클릭한 탭에 해당하는 컨텐츠 보이기
            var tabId = $(this).parent().index()+1;
            console.log(tabId)
            $("[data-tab]").css({"display":"none"});
            $("[data-tab=poptab"+tabId+"]").css({"display":"block"});
         });
        });


      </script>

      <!-- 이전채용 선택시 -->
      <div data-tab="poptab1" style="display:block;">
        <div class="board-head flex-end content-mt2">
          <div class="board-head__cell type-gap2">
            <span class="title-sub4">총 23건</span>
          </div>
        </div>
        <div class="board-body content-mt2">
          <div class="table table-type1">
            <table id="popupTable1" class="type-line">
              <colgroup>
                <col style="width: 80px;">
                <col style="width: 60px;">
                <col>
                <col style="width: 140px;">
                <col style="width: 120px;">
              </colgroup>
              <thead>
              <tr>
                <th>선택</th>
                <th>번호</th>
                <th>채용공고명</th>
                <th>채용분야명</th>
                <th>채용전형명</th>
              </tr>
              </thead>
            </table>
          </div>
          <script>
            $('#popupTable1').DataTable({
              data: [
                {
                  '선택': '',
                  '번호' : '23',
                  '채용공고명' : '각 부문 신입/경력사원 모집',
                  '채용분야명' : '기술',
                  '채용전형명' : '서류전형1차',
                },
                {
                  '선택': '',
                  '번호' : '23',
                  '채용공고명' : '각 부문 신입/경력사원 모집',
                  '채용분야명' : '기술',
                  '채용전형명' : '서류전형1차',
                },
                {
                  '선택': '',
                  '번호' : '23',
                  '채용공고명' : '[AI음성기술전문]Linux C/C++개발자(경력)',
                  '채용분야명' : '선임/검사 컨설턴트',
                  '채용전형명' : '실무면접',
                },
                {
                  '선택': '',
                  '번호' : '23',
                  '채용공고명' : '각 부문 신입/경력사원 모집',
                  '채용분야명' : '인턴',
                  '채용전형명' : '임원면접',
                },
                {
                  '선택': '',
                  '번호' : '23',
                  '채용공고명' : '각 부문 신입/경력사원 모집',
                  '채용분야명' : '인턴',
                  '채용전형명' : '기술',
                },
                {
                  '선택': '',
                  '번호' : '23',
                  '채용공고명' : '각 부문 신입/경력사원 모집',
                  '채용분야명' : '인턴',
                  '채용전형명' : '기술',
                },
              ],
              columns: [
                {
                  data: '선택',
                  render: function() {
                    return `
                    <label class="input-chk">
                      <input type="radio" name="employment">
                      <span class="isHidden">선택</span>
                    </label>
                  `
                  }
                },
                { data: '번호' },
                { data: '채용공고명' },
                { data: '채용분야명' },
                { data: '채용전형명' }
              ],
              paging: false,
              searching: false,
              showing: false,
              info: false
            });
          </script>

          <!-- pagination -->
          <div class="dataTables_paginate">
            <a href="#" class="fg-button first">처음</a>
            <a href="#" class="fg-button previous">이전</a>
            <a href="#" class="fg-button ui-state-disabled">1</a>
            <a href="#" class="fg-button">2</a>
            <a href="#" class="fg-button">3</a>
            <a href="#" class="fg-button">4</a>
            <a href="#" class="fg-button">5</a>
            <a href="#" class="fg-button">41</a>
            <a href="#" class="fg-button next">다음</a>
            <a href="#" class="fg-button last">마지막</a>
          </div>
        </div>
        <div class="board-body content-mt5">
          <div class="table table-type1">
            <table id="popupTable2" class="type-line">
              <colgroup>
                <col style="width: 80px;">
                <col>
                <col>
              </colgroup>
              <thead>
              <tr>
                <th>
                  <label class="input-chk">
                    <input type="checkbox" data-ref="chkItem2" value="chkAll" onchange="inputCheckAll('chkItem2')">
                    <span class="isHidden">선택</span>
                  </label>
                </th>
                <th>척도명</th>
                <th>척도</th>
              </tr>
              </thead>
            </table>
          </div>
          <script>
            $('#popupTable2').DataTable({
              data: [
                {
                  '척도명': '1',
                  '척도' : '23년 상반기 건보 경험면접'
                },
                {
                  '척도명': '2',
                  '척도' : '23년 상반기 아던트 경험면접'
                },
              ],
              columns: [
                {
                  data: '',
                  render: function() {
                    return `
                    <label class="input-chk">
                      <input type="checkbox" data-ref="chkItem2" onchange="inputCheckAll('chkItem2')">
                      <span class="isHidden">선택</span>
                    </label>
                  `
                  }
                },
                { data: '척도명' },
                { data: '척도' }
              ],
              paging: false,
              searching: false,
              showing: false,
              info: false
            });
          </script>
        </div>
      </div>

      <!-- 보관함 선택시 -->
      <div data-tab="poptab2" style="display: none;">
        <div class="board-body content-mt2">
          <div class="table table-type1">
            <table id="popupTable3" class="type-line">
              <colgroup>
                <col style="width: 80px;">
                <col>
                <col style="width: 80px;">
                <col style="width: 120px;">
                <col>
              </colgroup>
              <thead>
              <tr>
                <th>선택</th>
                <th>척도명</th>
                <th>기본배경</th>
                <th>척도</th>
                <th>해설</th>
              </tr>
              </thead>
            </table>
          </div>
          <script>
            $('#popupTable3').DataTable({
              data: [
                {
                  '선택': '',
                  '척도명' : '매우 부적합-부적합-보통-적합-매우적합',
                  '기본배점' : '1점',
                  '척도' : '매우부적합',
                  '해설' : '행동증거가 거의 드러나지 않음',
                },
                {
                  '선택': '',
                  '척도명' : '매우 부적합-부적합-보통-적합-매우적합',
                  '기본배점' : '2점',
                  '척도' : '부적합',
                  '해설' : '행동증거가 미약하게 드러남',
                },
                {
                  '선택': '',
                  '척도명' : '매우 부적합-부적합-보통-적합-매우적합',
                  '기본배점' : '3점',
                  '척도' : '보통',
                  '해설' : '행동증거가 중간정도로 드러남',
                },
                {
                  '선택': '',
                  '척도명' : '매우 부적합-부적합-보통-적합-매우적합',
                  '기본배점' : '4점',
                  '척도' : '적합',
                  '해설' : '행동증거가 많이 드러남',
                },
                {
                  '선택': '',
                  '척도명' : '매우 부적합-부적합-보통-적합-매우적합',
                  '기본배점' : '5점',
                  '척도' : '매우적합',
                  '해설' : '행동증거가 매우 많이 드러남',
                },
                {
                  '선택': '',
                  '척도명' : '부적합-보통-적합',
                  '기본배점' : '1점',
                  '척도' : '부적합',
                  '해설' : '행동증거가 거의 드러나지 않음',
                },
                {
                  '선택': '',
                  '척도명' : '부적합-보통-적합',
                  '기본배점' : '2점',
                  '척도' : '보통',
                  '해설' : '행동증거가 중간정도로 드러남',
                },
                {
                  '선택': '',
                  '척도명' : '부적합-보통-적합',
                  '기본배점' : '3점',
                  '척도' : '매우적합',
                  '해설' : '행동증거가 매우 많이 드러남',
                },

              ],
              columns: [
                {
                  data: '선택',
                  defaultContent: '',
                  render: function (data, type, row, meta) {
                    // 첫 번째 행에만 라디오 버튼 렌더링
                    if (meta.row === 0 || row['척도명'] !== data['척도명']) {
                      return `
                <label class="input-chk">
                  <input type="radio" name="employment">
                  <span class="isHidden">선택</span>
                </label>`;
                    } else {
                      return ''; // 라디오 버튼이 이미 렌더링된 경우, 빈 문자열 반환
                    }
                  }
                },
                { data: '척도명' },
                { data: '기본배점' },
                { data: '척도' },
                { data: '해설' }
              ],
              paging: false,
              searching: false,
              showing: false,
              info: false,
              initComplete: function () {
                let rowspanValues = {}; // rowspan 값을 저장할 객체

                // 각 척도명에 대해 rowspan 값을 설정하기
                $('#popupTable3 tbody tr').each(function () {
                  let rowData = $(this).find('td:eq(1)').text(); // 척도명 가져오기

                  if (rowspanValues[rowData] === undefined) {
                    rowspanValues[rowData] = 1;
                  } else {
                    rowspanValues[rowData]++;
                  }
                });

                // rowspan을 설정하기 위해 데이터 반복
                $('#popupTable3 tbody tr').each(function () {
                  let rowData0 = $(this).find('td:eq(0)').text(); // 척도명 가져오기
                  let rowData = $(this).find('td:eq(1)').text(); // 척도명 가져오기

                  // 척도명이 처음 등장한 경우 rowspan 속성을 설정하여 결합
                  if (rowspanValues[rowData] !== undefined) {
                    $(this).find('td:eq(1)').attr('rowspan', rowspanValues[rowData]);
                    $(this).find('td:eq(0)').attr('rowspan', rowspanValues[rowData]);
                    delete rowspanValues[rowData]; // 설정된 rowspan 값을 삭제하여 중복 방지
                    delete rowspanValues[rowData0];
                  } else {
                    $(this).find('td:eq(1)').remove();
                    $(this).find('td:eq(0)').remove(); // 첫 번째 셀의 rowspan이 이미 설정된 경우, 첫 번째 셀 제거
                  }

                });
              }
            });

            function countRowsMatchingCondition(dataArray, condition) {
              let count = 0;
              dataArray.forEach(function (row) {
                if (row['척도명'] === condition) {
                  count++;
                }
              });
              return count;
            }

          </script>

          <!-- pagination -->
          <div class="dataTables_paginate">
            <a href="#" class="fg-button first">처음</a>
            <a href="#" class="fg-button previous">이전</a>
            <a href="#" class="fg-button ui-state-disabled">1</a>
            <a href="#" class="fg-button">2</a>
            <a href="#" class="fg-button">3</a>
            <a href="#" class="fg-button">4</a>
            <a href="#" class="fg-button">5</a>
            <a href="#" class="fg-button">41</a>
            <a href="#" class="fg-button next">다음</a>
            <a href="#" class="fg-button last">마지막</a>
          </div>
        </div>
      </div>

    </div>
    <div class="popup__btn-wrap">
      <button class="base-btn type1__size-m">적용</button>
    </div>
    <button class="btn-close" onclick="WAP_EMPL_0371.hide()">닫기</button>
  </section>
</div>
<script>
  const WAP_EMPL_0371 = new LayerPopup({target: "WAP-EMPL-0371"});
</script>