<div class="layer-popup type-modal" data-ref="WAP-EMPL-0014">
  <section class="popup__container popup__size-l">
    <div class="popup__header">
      <h3 class="popup__title">NCS조회</h3>
    </div>
    <div class="popup__contents popup__scroll-view">
        
      <!-- 검색영역 -->
      <div class="d-flex ai-c jc-c">
        <div class="input-box type-search" style="flex:1;">
          <input type="text" class="input-txt sch-data" placeholder="키워드를 입력하세요" oninput="inputValueChk()">
          <button type="button" class="btn-del" onclick="inputValueDel()">키워드 삭제</button>
        </div>
        <div class="sch-comp__sch">
          <button class="btn-sch base-btn type1__size-m">검색</button>
        </div>
      </div>
      <!-- 검색영역 -->

      <div class="content-mt2" style="margin-bottom:4px;">
        <p class="sub-text3">ncs.go.kr</p>
      </div>
      <div class="categori-box">
        <ul>
          <!-- 대분류 -->
          <li>
            <p>대분류</p>
            <div>
              <ul class="categori-list" data-ctName="main">
                <li><button type="button" data-ncsValue="category1">01.사업관리</button></li>
                <li><button type="button" data-ncsValue="category2">02.경영 회계 사무</button></li>
                <li><button type="button" data-ncsValue="category3">03.금융 보험</button></li>
                <li><button type="button" data-ncsValue="category4">04.교육 자연 사회과학</button></li>
              </ul>
            </div>
          </li>

          <!-- 중분류 -->
          <li>
            <p>중분류</p>
            <div>
              <ul class="categori-list" data-ctName="middle" style="display: none;">
                <li><button type="button" data-ncsValue="category1">01.사업관리</button></li>
                <li><button type="button" data-ncsValue="category1">02.사업관리</button></li>
              </ul>
            </div>
          </li>

          <!-- 소분류 -->
          <li>
            <p>소분류</p>
            <div>
              <ul class="categori-list" data-ctName="sub" style="display: none;">
                <li><button type="button">01.프로젝트관리</button></li>
                <li><button type="button">02.해외관리</button></li>
              </ul>
            </div>
          </li>
        </ul>
        <script>
          $(".categori-list button").on("click",function (){
            let categoryName = $(this).closest("ul").attr("data-ctName");

            if(categoryName === "main"){
              /* 대분류가 선택되었을 때 */
              $(".categori-list[data-ctName=middle] button").removeClass("on");
              $(".categori-list[data-ctName=sub] button").removeClass("on");

              $(".categori-list[data-ctName=middle]").css({"display":"block"});
            } else if(categoryName === "middle"){
              /* 중분류가 선택되었을 때 */
              $(".categori-list[data-ctName=sub] button").removeClass("on");

              $(".categori-list[data-ctName=sub]").css({"display":"block"});
            } else{
              /* 소분류가 선택되었을 때 */
            }

            /* 한번에 하나씩만 수정하기 */
            if(!$(this).hasClass("on")){
              $(".categori-list[data-ctName='" + categoryName + "'] button").removeClass("on");
              $(this).addClass("on");
            }else{
              $(this).removeClass("on");
            }
          });
        </script>
      </div>

      <div class="board-body content-mt2">
        <div class="table table-type1 ver4">
          <table id="table" class="">
            <colgroup>
              <col style="width: 180px;"/>
              <col />
              <col style="width: 80px;"/>
              <col style="width: 110px;"/>
            </colgroup>
            <thead>
              <tr>
                <th scope="col">세분류</th>
                <th scope="col">능력단위명</th>
                <th scope="col">NCS</th>
                <th scope="col">표준<br>직무기술서</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
          <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/rowgroup/1.1.3/js/dataTables.rowGroup.min.js"></script>
          <script>
            $('#table').DataTable({
              data: [
                {
                  '세분류': '01.해외법인설립관리',
                  '능력단위명': '01.해외법인 설립목적 파악',
                  'NCS' : '링크1',
                  '표준직무기술서' : '링크2',
                },
                {
                  '세분류': '01.해외법인설립관리',
                  '능력단위명': '02.해외법인 설립내부역량분석',
                  'NCS' : '링크1',
                  '표준직무기술서' : '링크2',
                },
                {
                  '세분류': '01.해외법인설립관리',
                  '능력단위명': '03.해외법인 설립대상국 분석',
                  'NCS' : '링크1',
                  '표준직무기술서' : '링크2',
                },
                {
                  '세분류': '02.해외취업관리',
                  '능력단위명': '01.해외법인 설립목적 파악',
                  'NCS' : '링크1',
                  '표준직무기술서' : '링크2',
                },
                {
                  '세분류': '02.해외취업관리',
                  '능력단위명': '02.해외법인 설립내부역량분석',
                  'NCS' : '링크1',
                  '표준직무기술서' : '링크2',
                },
                {
                  '세분류': '02.해외취업관리',
                  '능력단위명': '03.해외법인 설립대상국 분석',
                  'NCS' : '링크1',
                  '표준직무기술서' : '링크2',
                },
              ],
              columns: [
                { data: '세분류' },
                { data: '능력단위명' },
                {
                  data: 'NCS',
                  render: function(data) {
                    return `
                    <a href="${data}" class="point-color5">보기</a>
                    `
                  }
                },
                {
                  data: '표준직무기술서',
                  render: function(data) {
                    return `
                    <div class="d-flex ai-c jc-c"><a href="${data}" class="download-btn">보기</a></div>
                    `
                  }
                }
              ],
              // RowGroup 플러그인을 사용하여 세분류를 그룹화합니다.
              rowGroup: {
                dataSrc: '세분류',
                startRender: function(rows, group) {
                  let buttonHtml = `<button type='button' class='toggle-childcell-btn'>${group}</button>`;
                  return buttonHtml;
                },
              },
              createdRow: function (row, data, dataIndex) {
                // 세분류 텍스트를 없애고자 한다면 해당 열의 내용을 삭제합니다.
                $('td:eq(0)', row).empty(); // 첫 번째 열을 선택하여 내용을 비웁니다.
              },

              paging: false,
              searching: false,
              showing: false,
              info: false,
              ordering: false
            });

            // 그룹이 확장되거나 축소될 때마다 발생하는 이벤트를 감지합니다.
            $(document).ready(function(){
              $(".toggle-childcell-btn").closest('tr').nextUntil('tr.dtrg-group').hide();
            })
            $(".toggle-childcell-btn").on("click",function(){
              let rows = $(this).closest('tr').nextUntil('tr.dtrg-group');
              if(!$(this).hasClass("on")){
                $(this).closest("td").css({"background-color":"#F0F8FC"});
                $(this).addClass("on");
                rows.show();
              }else{
                $(this).closest("td").css({"background-color":"transparent"});
                $(this).removeClass("on");
                rows.hide();
              }
            });
          </script>
          <div class="dataTables_paginate">
            <a href="#" class="fg-button first">처음</a>
            <a href="#" class="fg-button previous">이전</a>
            <a href="#" class="fg-button ui-state-disabled">1</a>
            <a href="#" class="fg-button">2</a>
            <a href="#" class="fg-button">3</a>
            <a href="#" class="fg-button">4</a>
            <a href="#" class="fg-button">5</a>
            <a href="#" class="fg-button">41</a>
            <a href="#" class="fg-button next">다음</a>
            <a href="#" class="fg-button last">마지막</a>
          </div>
        </div>
      </div>

    </div>
    <div class="popup__btn-wrap">
      <button class="base-btn type1__size-m">선택한 채용공고 불러오기</button>
    </div>
    <button class="btn-close" onclick="WAP_EMPL_0014.hide()">닫기</button>
  </section>
</div>
<script>
  const WAP_EMPL_0014 = new LayerPopup({target: "WAP-EMPL-0014"});
</script>