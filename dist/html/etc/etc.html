<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>wiselection</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="../../assets/css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <script src="../../assets/js/datepicker.min.js"></script>
  <script src="../../assets/js/ui.js"></script>
</head>
<body>
  <div class="wrap">

    <!-- header -->
    <header class="header">
      <div class="header__inner">
        <h1 class="header--logo"><a href="/"><img src="../../assets/images/logo.png" alt="wiselection"></a></h1>
        <div class="header__info">
          <div class="header__info__cell header__page-sort">
            <span>관리자 페이지</span>
          </div>
          <ul class="header__info__cell header__list-count">
            <li>
              <span class="key">전체</span>
              <span class="val point-color">10건</span>
            </li>
            <li>
              <span class="key">전체</span>
              <span class="val point-color">8건</span>
            </li>
            <li>
              <span class="key">계약만료</span>
              <span class="val point-color">2건</span>
            </li>
          </ul>
          <div class="header__info__cell header__input-search">
            <div class="input-box type-search">
              <button type="button" class="btn-del" onclick="inputValueDel()">키워드 삭제</button>
              <input type="text" class="input-txt" placeholder="기업명, 공고명 검색" oninput="inputValueChk()">
            </div>
          </div>
        </div>
        <div class="header__util">
          <a href="#">홍길동님</a>
          <a href="#">도움말</a>
          <a href="#">로그아웃</a>
        </div>
      </div>
    </header>
    <!-- //header -->
    
    <!-- container -->
    <div class="container">
      <!-- snb -->
      <nav class="snb" data-ref="sideNav">
        

        
        <ul class="snb__menu">
          <li><a href="WAP-HOM-0020.html" class="snb__depth1--btn icon3">홈</a></li>
          <li><a href="WAP-EMPL-0010.html" class="snb__depth1--btn icon4">채용등록</a></li>
          <li><a href="WAP-EMPL-0020.html" class="snb__depth1--btn icon7">채용목록</a></li>
          <li>
            <button
              type="button"
              class="snb__depth1--btn icon5"
              aria-expanded="false"
              aria-controls="snbSubMenu1"
            ><span>보관함</span></button>
            <div id="snbSubMenu1" class="snb__depth2">
              <ul>
                <li><a href="WAP-CONT-0010.html">입사 원서</a></li>
                <li><a href="WAP-CONT-0060.html">서류 도구</a></li>
                <li><a href="WAP-CONT-0110.html" class="isMark">필기 도구</a></li>
                <li><a href="WAP-CONT-0170.html">면접 도구</a></li>
                <li><a href="WAP-CONT-0230.html">평가 척도</a></li>
                <li><a href="WAP-CONT-0270.html">만족도조사</a></li>
              </ul>
            </div>
          </li>
          <li class="isCurrent">
            <button
              type="button"
              class="snb__depth1--btn icon6"
              aria-expanded="true"
              aria-controls="snbSubMenu2"
            ><span>기업정보</span></button>
            <div id="snbSubMenu2" class="snb__depth2 isOpen">
              <ul>
                <li><a href="WAP-CORP-0022.html">기업정보</a></li>
                <li><a href="WAP-SYS-0090.html">사용자</a></li>
                <li class="isCurrent"><a href="WAP-ETPR-0070.html">채용홈페이지</a></li>
                <li><a href="WAP-ETPR-0200.html">개인정보 삭제기준</a></li>
                <li><a href="WAP-ETPR-0210.html">발송이력</a></li>
              </ul>
            </div>
          </li>
        </ul>

        

        <button type="button" class="snb__btn-toggle" data-ref="btn-toggle">축소/확대 버튼</button>
      </nav>
      <script>
        const sideNav = new SideNav({target: "sideNav"});
      </script>
      <!-- //snb -->

      <div class="contents">
        <h3 class="title-sub1">팝업</h3>
        
        <div class="form-inner type-gap2">
          <button type="button" class="base-btn type2__size-m" onclick="WAP_COM_0050.show()">SMS 발송팝업</button>
          <button type="button" class="base-btn type2__size-m" onclick="WAP_COM_0055.show()">이메일 발송팝업</button>
          <button type="button" class="base-btn type2__size-m" onclick="WAP_CONT_0100.show()">
            <span class="base-icon icon-upload__size-s__color1">엑셀업로드</span>
          </button>
          <button type="button" class="base-btn type2__size-m" onclick="WAP_CONT_0043.show()">입사지원서 약관등록</button>
        </div>
          
        <!-- 주소입력 테스트 -->
        <h3 class="title-sub1 content-mt6">주소입력 테스트</h3>
        
        <p style="margin-bottom: 16px">아이디값 확인 필수</p>
        
        <div class="form-inner type-gap2">
          <div class="input-box no-data__addr1">
            <input type="text" class="input-txt a-num" id="zip_no" title="우편번호" readonly>
          </div>
          <div class="input-box no-data__addr2">
            <input type="text" class="input-txt" id="addr" title="건물주소" readonly>
          </div>
          <button type="button" class="base-btn type2__size-m" onclick="WAP_CORP_0025.show()">검색</button>
        </div>
        <div class="form-inner type-gap2">
          <div class="input-box">
            <input type="text" class="input-txt" id="addr_dtl" required="" title="상세주소 입력" placeholder="상세주소를 입력해주세요." oninput="inputValueChk();">
            <button type="button" class="btn-del" onclick="inputValueDel()">입력 삭제</button>
          </div>
        </div>
        <!--// 주소입력 테스트 -->
        
      </div>


      <!-- contents navigation -->
      <div class="contents-nav type2">
        <div class="contents-nav__inner">
          <div class="contents-nav__btn-box">
            <button type="button" class="base-btn type2__size-m">초기화</button>
          </div>
          <div class="contents-nav__btn-box">
            <button type="button" class="base-btn type1__size-m">저장</button>
          </div>
        </div>
      </div>
      <!-- //contents navigation -->
    </div>
    <!-- //container -->
    
  </div>
  <div class="layer-popup type-modal send-sms" data-ref="WAP-COM-0050">
  <section class="popup__container popup__size-m">
    <div class="popup__header">
      <h3 class="popup__title">SMS 발송</h3>
    </div>
    <div class="popup__contents popup__scroll-view">

      <div class="form-row">
        <h4 class="title-sub2">보내는 사람 번호</h4>
        <div class="form-inner type-gap2">
          <div class="input-box h-full">
            <input type="text" class="input-txt" title="보내는 사람 번호" readonly value="010-1234-1234">
          </div>
        </div>
      </div>

      <div class="form-row">
        <h4 class="title-sub2">받는 사람 번호</h4>
        <div class="form-inner type-gap2">
          <div class="input-box h-full after-btn">
            <input type="text" id="recipientNumber" class="input-txt a-num" maxlength="11" placeholder="‘-’없이 입력" oninput="inputNumber()">
            <button type="button" class="btn-del" onclick="inputValueDel()">입력 삭제</button>
          </div>
          <button class="base-btn type2__size-m" onclick="phoneAddTag()">추가</button>
        </div>
      </div>

      <div id="phoneNum" class="tag content-mt2">
        <div class="tag__box"></div>
        <button type="button" class="tag__dropdown-btn" onclick="togglePhoneNum();"><span class="is-hidden">토글</span></button>
      </div>

      <script>
        const phoneNum2 = new CreateTag({
          target: document.getElementById('phoneNum'),
          tagType: 3,
        });
      </script>

      <div class="form-row">
        <h4 class="title-sub2">템플릿 선택</h4>
        <button type="button" class="dropdown-btn" data-dropdown='{
          "name": "dropdownSingle",
          "type" : "single",
          "option" : [
            {
              "name": "기업명",
              "value": "val1",
              "disabled": false,
              "checked": true
            },
            {
              "name": "채용공고",
              "value": "val2",
              "disabled": false,
              "checked": false
            },
            {
              "name": "채용분야",
              "value": "val3",
              "disabled": false,
              "checked": false
            },
            {
              "name": "수험번호",
              "value": "val4",
              "disabled": false,
              "checked": false
            },
            {
              "name": "성명",
              "value": "val5",
              "disabled": false,
              "checked": false
            },
            {
              "name": "이메일",
              "value": "val6",
              "disabled": false,
              "checked": false
            },
            {
              "name": "비고",
              "value": "val7",
              "disabled": false,
              "checked": false
            }
          ]
        }'>선택</button>
        <div id="selectCont" class="d-flex ai-c content-mt2">
          <span class="point-color6">자주쓰는내용</span>

          <div class="chips">
            <button class="chip">
              <span class="chip-txt">기업명</span>
            </button>
            <button class="chip">
              <span class="chip-txt">채용공고</span>
            </button>
            <button class="chip">
              <span class="chip-txt">채용분야</span>
            </button>
            <button class="chip">
              <span class="chip-txt">수험번호</span>
            </button>
          </div>
        </div>
      </div>

      <div class="form-row">
        <h4 class="title-sub2">내용</h4>

        <textarea class="textarea" name="" id="" title="내용입력 하기" placeholder="입력하세요"></textarea>

        <div class="templit-info">
          <div class="temp-col temp-col1">
            <p><strong>현재 내용을 템플릿으로 저장하고 싶나요?</strong>템플릿 명을 작성 후 저장 버튼을 클릭 해주세요.</p>
          </div>
          <div class="temp-col temp-col2">
            <div class="input-box">
              <input type="text" class="input-txt size-s" placeholder="템플릿명">
            </div>
            <button class="base-btn type2__size-s">
              <span>템플릿 저장</span>
            </button>
          </div>
        </div>
      </div>

    </div>
    <div class="popup__btn-wrap">
      <div class="col-left">
        <label class="input-chk">
          <input type="checkbox">
          <span><strong>예약</strong></span>
        </label>
        
        <div class="input-box type-calendar">
          <input type="text" id="calendar" class="input-txt" placeholder="예약 날짜">
          <script>
            const calendar = new Datepicker(document.getElementById('calendar'), {
              ...CALENDAR_DEFAULT_OPTION,
              ...{
                "minDate": "2023.12.06",
                "maxDate": "2023.12.20"
              }
            });
          </script>
        </div>
        
        <div class="input-box">
          <input type="text" class="input-txt" placeholder="예약 시간" oninput="inputValueChk()">
          <button type="button" class="btn-del" onclick="inputValueDel()">입력 삭제</button>
        </div>
      </div>

      <button class="base-btn btn-send type1__size-m">발송</button>
    </div>
    <button class="btn-close" onclick="WAP_COM_0050.hide()">닫기</button>
  </section>
</div>
<script>
  // 받는 사람 번호 입력칸
  const recipientNumber = document.querySelector('#recipientNumber')
  const phoneNumTagWrap = document.querySelector('#phoneNum')

  // 받는 사람 번호 추가
  function phoneAddTag() {
    phoneNum2.addTag(recipientNumber.value);
    recipientNumber.value = '';
  }

  // 받는 사람 번호 드롭다운을 위한 toggleClass
  function togglePhoneNum() {
    phoneNumTagWrap.classList.toggle('is-show')
  }

  // 자주 쓰는 내용
  $.fn.checkChip = function () {
    return this.each(function () {
      const chipBody = $(this)
      chipBody.on('click', function (){
        $(this).toggleClass('checked')
      })
    })
  }
  $('.chip').checkChip();

  const WAP_COM_0050 = new LayerPopup({target: "WAP-COM-0050"});
</script>;
  <div class="layer-popup type-modal send-sms" data-ref="WAP-COM-0055">
  <section class="popup__container popup__size-m">
    <div class="popup__header">
      <h3 class="popup__title">E-Mail 발송</h3>
    </div>
    <div class="popup__contents popup__scroll-view">

      <div class="form-row">
        <h4 class="title-sub2">보내는 메일 주소</h4>
        <div class="form-inner type-gap2">
          <div class="input-box h-full">
            <input type="text" class="input-txt" title="보내는 사람 번호" readonly value="jinny@test.com">
          </div>
        </div>
      </div>

      <div class="form-row">
        <h4 class="title-sub2">받는 메일 주소</h4>
        <div class="form-inner type-gap2">
          <div class="input-box h-full after-btn">
            <input type="text" id="emailaddr" class="input-txt a-num" placeholder="메일 주소 입력" oninput="inputValueChk()">
            <button type="button" class="btn-del" onclick="inputValueDel()">입력 삭제</button>
          </div>
          <button class="base-btn type2__size-m" onclick="emailAddTag()">추가</button>
        </div>
      </div>

      <div id="emailTag" class="tag content-mt2">
        <div class="tag__box"></div>
        <button type="button" class="tag__dropdown-btn" onclick="toggleEmail();"><span class="is-hidden">토글</span></button>
      </div>

      <script>
        const emailAdd = new CreateTag({
          target: document.getElementById('emailTag'),
          tagType: 3,
        });
      </script>

      <div class="form-row">
        <h4 class="title-sub2">메일 내용</h4>
        <div class="form-inner type-gap2">
          <div class="input-box h-full">
            <input type="text" class="input-txt" title="메일 내용 입력하기" placeholder="제목을 입력하세요">
          </div>
        </div>

        <div id="selectCont" class="d-flex ai-c content-mt2">
          <span class="point-color6">자주쓰는내용</span>

          <div class="chips">
            <button class="chip">
              <span class="chip-txt">기업명</span>
            </button>
            <button class="chip">
              <span class="chip-txt">아이디</span>
            </button>
            <button class="chip">
              <span class="chip-txt">성명</span>
            </button>
            <button class="chip">
              <span class="chip-txt">부서</span>
            </button>
            <button class="chip">
              <span class="chip-txt">직함</span>
            </button>
            <button class="chip">
              <span class="chip-txt">수험번호</span>
            </button>
          </div>
        </div>
      </div>

      <div class="form-row">
        <textarea class="textarea" name="" id="" title="내용입력 하기" placeholder="입력하세요"></textarea>
      </div>

    </div>
    <div class="popup__btn-wrap">
      <button class="base-btn type1__size-m">발송</button>
    </div>
    <button class="btn-close" onclick="WAP_COM_0055.hide()">닫기</button>
  </section>
</div>
<script>
  // 받는 사람 메일 입력칸
  const emailaddr = document.querySelector('#emailaddr')
  const emailTag = document.querySelector('#emailTag')

  // 받는 사람 메일 추가
  function emailAddTag() {
    emailAdd.addTag(emailaddr.value);
    emailaddr.value = '';
  }

  // 받는 사람 메일 드롭다운을 위한 toggleClass
  function toggleEmail() {
    emailTag.classList.toggle('is-show')
  }

  // 자주 쓰는 내용
  $.fn.checkChip = function () {
    return this.each(function () {
      const chipBody = $(this)
      chipBody.on('click', function (){
        $(this).toggleClass('checked')
      })
    })
  }
  $('.chip').checkChip();

  const WAP_COM_0055 = new LayerPopup({target: "WAP-COM-0055"});
</script>;
  <form name="form" id="form" method="post">
  <input type="hidden" id="pageIndex" name="currentPage" value="1"> <!-- 요청 변수 설정 (현재 페이지. currentPage : n > 0) -->
  <input type="hidden" name="countPerPage" value="10"><!-- 요청 변수 설정 (페이지당 출력 개수. countPerPage 범위 : 0 < n <= 100) -->
  <input type="hidden" name="resultType" value="json"> <!-- 요청 변수 설정 (검색결과형식 설정, json) --> 
  <input type="hidden" id="keyword" name="keyword" value=""> <!-- 요청 변수 설정 (검색결과형식 설정, json) --> 
  <input type="hidden" name="confmKey" value="U01TX0FVVEgyMDIwMDYyMzExNDUyNDEwOTg5NDU="><!-- 요청 변수 설정 (승인키) -->
</form>

<div class="layer-popup type-modal" data-ref="WAP-CORP-0025">
  <section class="popup__container popup__size-m">
    <div class="popup__header">
      <h3 class="popup__title">우편번호 검색</h3>
    </div>
    <div class="popup__contents popup__scroll-view">

      <div class="find-addr">
        <div class="form-row">
          <div class="form-inner type-gap2">
            <div class="input-box h-full after-btn">
              <input type="text" id="searchKeyword" class="input-txt" placeholder="주소를 입력하세요" oninput="inputValueChk();enterSearch()" onkeydown="enterSearch()">
              <button type="button" class="btn-del" onclick="inputValueDel()">입력 삭제</button>
            </div>
            <button class="base-btn type2__size-m" onclick="getAddr()">검색</button>
          </div>
        
          <p class="pop-guide-txt">
            ※ 정확한 주소를 모르시는 경우 시/군/구+도로명, 동명 또는 건물명 예) 동해시 중앙로, 여수 중앙동, 대전 현대아파트<br>
            ※ 정확한 주소를 아시는 경우 도로명 + 건물번호 예) 도움5로 19 읍/면/동/리 + 지번 예) 어진동 307-19
          </p>
        
          <div class="postnum-result">
            <h4 class="title-sub1">검색결과</h4>

            <!-- addr-list -->
            <ul class="addr-list"></ul>
            <!--// addr-list -->

            <!-- no-data -->
            <div class="no-data">
              <p class="no-data__txt">검색결과가 없습니다.<br>직접 입력을 원하신다면, 아래 형식에 맞춰 작성 하여 등록 해주세요.</p>
              <div class="form-inner no-data__addr-row type-gap2">
                <div class="input-box no-data__addr1">
                  <input type="text" class="input-txt a-num" id="RESS005C_direct_zipno" placeholder="우편번호 입력" maxlength="5" oninput="inputNumber()">
                  <button type="button" class="btn-del" onclick="inputValueDel()">입력 삭제</button>
                </div>
                <div class="input-box no-data__addr2">
                  <input type="text" class="input-txt" id="RESS005C_direct_addr" placeholder="지번, 도로명+건물명 입력" oninput="inputValueChk()">
                  <button type="button" class="btn-del" onclick="inputValueDel()">입력 삭제</button>
                </div>
              </div>
            </div>
            <!--// no-data -->

            <!-- dataTables_paginate -->
            <div class="dataTables_paginate"></div>
            <!--// dataTables_paginate -->

          </div>
        </div>
      </div>
    </div>
    <div class="popup__btn-wrap">
      <button class="base-btn type1__size-m" onclick="setDirectAddr()">적용</button>
    </div>
    <button class="btn-close" onclick="WAP_CORP_0025.hide()">닫기</button>
  </section>
</div>
<script>
  const WAP_CORP_0025 = new LayerPopup({target: "WAP-CORP-0025"});

	function checkSearchedWord(obj){
		if ($(obj).val().length > 0){
			//특수문자 제거
			var expText = /[%=><]/ ;
			if(expText.test($(obj).val()) == true){
				alert("특수문자를 입력 할수 없습니다.") ;
				obj.value = obj.value.split(expText).join(""); 
				return false;
			}
			
			//특정문자열(sql예약어의 앞뒤공백포함) 제거
			var sqlArray = new Array(
				//sql 예약어
				"OR", "SELECT", "INSERT", "DELETE", "UPDATE", "CREATE", "DROP", "EXEC", "UNION",  "FETCH", "DECLARE", "TRUNCATE" 
			);
			
			var regex;
			for (var i=0; i<sqlArray.length; i++){
				regex = new RegExp( sqlArray[i] ,"gi");
				if (regex.test($(obj).val())) {
				    alert("\"" + sqlArray[i]+"\"와(과) 같은 특정문자로 검색할 수 없습니다.");
				    $(obj).val() = $(obj).val().replace(regex, "");
					return false;
				}
			}
		}
		return true ;
	};  

  function enterSearch() {
		var evt_code = (window.netscape) ? ev.which : event.keyCode;
		if (evt_code == 13) {    
			event.keyCode = 0;  
			getAddr(); 
		} 
	};

  function getAddr(){
		// 적용예 (api 호출 전에 검색어 체크) 
		var keyword = $("#searchKeyword").val();
		$("#keyword").val(keyword);
		if (!checkSearchedWord($("#keyword"))) {
			return ;
		}
		
		$.ajax({
			method:"POST",
			url: "http://www.juso.go.kr/addrlink/addrLinkApiJsonp.do",
      crossDomain:true,
      data: $("#form").serialize(),
      dataType : "jsonp",
      success: function(data){
        var errorCode = data.results.common.errorCode;
        var totalCount = data.results.common.totalCount;
        var countPerPage = data.results.common.countPerPage;
        var currentPage = data.results.common.currentPage;
  
        if (totalCount > 0){
          $(".no-data").hide();
    
          var resultHtml = "";
          $(data.results.juso).each(function(index, item){
            resultHtml += "<li>";
            resultHtml += "	<a href='javascript:setAddr(\""+item.zipNo+"\", \"" + item.roadAddr + "\", \"" + item.admCd + "\")'>";
            resultHtml += "		<div class='result-col1'>";
            resultHtml += "		  <p class='road'><span class='label'>도로명</span> "+ item.roadAddr +"</p>";
            resultHtml += "		  <p class='num'><span class='label'>지번</span> "+ item.jibunAddr +"</p>";
            resultHtml += "		  <p class='en'><span class='label'>영문</span> "+ item.engAddr +"</p>";
            resultHtml += "		</div>";
            resultHtml += "		<div class='result-col2'>";
            resultHtml += "		  <span class='num'>[우편번호 "+ item.zipNo +"]</span>";
            resultHtml += "		</div>";
            resultHtml += "	</a>";
            resultHtml += "</li>";
          })	
          
          $(".addr-list").html(resultHtml);

          console.log('success', totalCount)

          // *목록 페이징* ui.js
          $(".dataTables_paginate").html(paging(totalCount, countPerPage, 10, currentPage))
          
        } else {
          $(".addr-list").empty();
          $(".dataTables_paginate").empty();
          $(".no-data").show();
        }
  
      },
      error: function(data){
        $(".addr-list").empty();
        $(".dataTables_paginate").empty();
        $(".no-data").show();
      }
    });
  };
 
  function setAddr(zipNo, roadAddr, admCd){
		$("#zip_no").val(zipNo);
		$("#addr").val(roadAddr);
		$("#admCd").val(admCd);
		WAP_CORP_0025.hide();
	};
	
	function setDirectAddr(){
		var zipNo = $("#RESS005C_direct_zipno").val();
		var addr = $("#RESS005C_direct_addr").val();
		var admCd = "";
		
		if (zipNo == "" || addr == ""){
			alert("주소를 입력해 주세요.");
			return;
		} 
		
		setAddr(zipNo, addr, admCd);
	};
	
	function goPaging(index){
		$("#pageIndex").val(index);
		getAddr();
	};
</script>;
  <div class="layer-popup type-modal upload-excel" data-ref="WAP-CONT-0100">
  <section class="popup__container popup__size-m">
    <div class="popup__header">
      <h3 class="popup__title">엑셀 등록</h3>
    </div>
    <div class="popup__contents popup__scroll-view">
      
      <input id="excelUpload" type="file" name="files" title="파일 업로드" multiple>

      <div class="upload-area">
        <p class="ua-txt">파일을 끌어서 첨부할 수 있습니다.</p>
        <button class="btn-upload base-btn type2__size-s">파일 직접 선택</button>
      </div>

      <div class="file-list tag__box"></div>

      <p class="guide-download">엑셀 등록을 위해서는 샘플 양식에 맞춰 엑셀을 등록해야합니다. <a href="javascript: alert('샘플양식 준비중')">샘플양식 다운로드</a></p>
    </div>
    
    <div class="popup__btn-wrap">
      <button class="base-btn type1__size-m">저장</button>
    </div>
    <button class="btn-close" onclick="WAP_CONT_0100.hide()">닫기</button>
  </section>
</div>

<script>
  // 드래그앤 드롭
  var uploadExcel = document.querySelector('.upload-excel');
  var btnUpload = uploadExcel.querySelector('.btn-upload');
  var inputFile = uploadExcel.querySelector('#excelUpload');
  var uploadBox = uploadExcel.querySelector('.upload-area');
  var fileList = uploadExcel.querySelector('.file-list'); // 파일 목록을 표시할 ul 요소
  var selectedFiles = []; // 선택된 파일들을 저장할 배열

  /* 박스 안에 Drag를 하고 있을 때 */
  uploadBox.addEventListener('dragover', function(e) {
    e.preventDefault();
    uploadBox.classList.add('on');
    console.log('dragover');
    var vaild = e.dataTransfer.types.indexOf('Files') >= 0;
  });
  
  /* 박스 밖으로 Drag가 나갈 때 */
  uploadBox.addEventListener('dragleave', function(e) {
    uploadBox.classList.remove('on');
  });
  
  /* 박스 안에서 Drag를 Drop했을 때 */
  uploadBox.addEventListener('drop', function(e) {
    e.preventDefault(); // 기본 이벤트 방지

    var files = e.dataTransfer.files; // 드롭한 파일들
    updateSelectedFiles(files); // 선택된 파일들을 selectedFiles 배열에 추가하고 UI 업데이트
  });
  
  btnUpload.addEventListener('click', function () {
    excelUpload.click();
  });

  // inputFile에도 동일하게 적용하여 파일 선택 시 목록을 업데이트하도록 합니다.
  inputFile.addEventListener('change', function(e) {
    var files = e.target.files; // 선택한 파일들

    updateSelectedFiles(files); // 선택된 파일들을 selectedFiles 배열에 추가하고 UI 업데이트
  });

  // 파일 선택이나 드래그 앤 드롭 시 selectedFiles 배열 업데이트
  function updateSelectedFiles(files) {
    let isFileAdded = false; // 파일이 새로 추가되었는지 여부를 추적
    
    Array.from(files).forEach(function(file) {
      // 중복된 파일이 없는지 검사
      if (!selectedFiles.some(selectedFile => selectedFile.name === file.name)) {
        selectedFiles.push(file); // 배열에 파일 추가
        isFileAdded = true; // 새 파일이 추가되었음
        
        // UI에 새로운 파일 추가
        const createdEl = `<div class='tag__item tag__item--type1'><span class='txt'>${file.name}</span><button class='del' onclick="removeTag(this, '${file.name}')"></button></div>`;
        fileList.innerHTML += createdEl; // 생성된 요소를 fileList에 추가
      }
    });

    // 선택된 파일이 추가되었으면 inputFile의 파일 목록을 업데이트
    if(isFileAdded) {
      // inputFile 엘리먼트에 파일 목록을 직접 설정할 수는 없으므로,
      // 필요한 경우 서버에 업로드 로직을 여기에 추가하거나, 사용자에게 추가된 파일 목록을 다른 방식으로 알림
      console.log(selectedFiles.length + " files selected.");
    }
  }

  // 파일 제거 로직
  function removeFileFromList(fileName) {
    // 파일 이름을 기준으로 배열에서 해당 파일 객체를 제거
    selectedFiles = selectedFiles.filter(function(file) {
      return file.name !== fileName;
    });

    // inputFile의 상태 초기화 (중요)
    if(inputFile) {
      inputFile.value = ''; // inputFile 초기화
    }
  }

  // removeTag 함수 내에서 이 함수를 호출
  function removeTag(element, fileName) {
    // 이전 코드와 동일하게 파일을 제거하는 로직을 구현
    // 파일 이름을 인자로 받아 해당 파일을 selectedFiles 배열에서 제거
    removeFileFromList(fileName); // 수정 필요

    // UI에서 해당 태그 제거
    var tagItem = element.closest('.tag__item');
    if(tagItem) {
      tagItem.remove();
    }
    console.log(selectedFiles.length + " files selected.");
  }

  // 파일 유효성 검사 함수
  function isValid(data){
		
		//파일인지 유효성 검사
		if(data.types.indexOf('Files') < 0)
			return false;
		
		//이미지인지 유효성 검사
		if(data.files[0].type.indexOf('image') < 0){
			alert('이미지 파일만 업로드 가능합니다.');
			return false;
		}
		
		//파일의 개수는 1개씩만 가능하도록 유효성 검사
		if(data.files.length > 1){
			alert('파일은 하나씩 전송이 가능합니다.');
			return false;
		}
		
		//파일의 사이즈는 50MB 미만
		if(data.files[0].size >= 1024 * 1024 * 50){
			alert('50MB 이상인 파일은 업로드할 수 없습니다.');
			return false;
		}
		
		return true;
	}

  const WAP_CONT_0100 = new LayerPopup({target: "WAP-CONT-0100"});
</script>;
  <div class="layer-popup type-modal agree-detail" data-ref="WAP-CONT-0043">
  <section class="popup__container popup__size-m">
    <div class="popup__header">
      <h3 class="popup__title">약관 등록</h3>
    </div>
    <div class="popup__contents popup__scroll-view">
      
      <div class="form-row">
        <h4 class="title-sub2">제목</h4>
        <div class="form-inner">
          <div class="input-box h-full">
            <input type="text" class="input-txt" placeholder="입력하세요" oninput="inputValueChk()">
            <button type="button" class="btn-del" onclick="inputValueDel()">키워드 삭제</button>
          </div>
        </div>
      </div>
      
      <div class="form-row">
        <h4 class="title-sub2">내용</h4>
        <div class="form-inner">
          <div class="input-box h-full">
            <textarea placeholder="입력하세요"></textarea>
          </div>
        </div>
      </div>

    </div>
    
    <div class="popup__btn-wrap">
      <button class="base-btn type1__size-m">저장</button>
    </div>
    <button class="btn-close" onclick="WAP_CONT_0043.hide()">닫기</button>
  </section>
</div>

<script>
  const WAP_CONT_0043 = new LayerPopup({target: "WAP-CONT-0043"});
</script>;
  
  <!-- **** 팝업 확인 용 스크립트 **** -->
  <script>
    const pop = {
      "WAP_COM_0050" : ()=>{WAP_COM_0050.show()},
      "WAP_COM_0055" : ()=>{WAP_COM_0055.show()},
      "WAP_CORP_0025" : ()=>{WAP_CORP_0025.show()},
      "WAP_CONT_0100" : ()=>{WAP_CONT_0100.show()},
      "WAP_CONT_0043" : ()=>{WAP_CONT_0043.show()}
    }
    if(Util.getUrlParams().popup) pop[Util.getUrlParams().popup]();
  </script>
  <!-- ///**** 팝업 확인 용 스크립트 **** -->
</body>
</html>